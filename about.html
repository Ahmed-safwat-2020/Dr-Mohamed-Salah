<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DR.Mohamed Salah - About</title>
    <link rel="stylesheet" href="style/bootstrap.min.css">
    <link rel="stylesheet" href="style/font-awesome.min.css">
    <link rel="stylesheet" href="style/layout.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Almarai&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@500&display=swap" rel="stylesheet">
</head>
<body>
<!-- -----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------------
--------------------------------------------Start About ---------------------------------------------------
----------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------ -->
<section class="about">
    <div class="container">
        <h1 class="text-center">RESUME </h1>
        <P class="text-center under">About <span>Me</span></P>
        <div class="row">
            <div class="col-md-6 col-sm-12 text-left">
                <p class="lead">PERSONAL INFO</p>
                <div class="content">
                   <div class="container">
                    <div class="row">
                        <div class="col-xs-5">
                            <ul class="list-unstyled" id="personal-info-left">
                                <!-- البيانات هتتحمل من API -->
                            </ul>
                        </div>
                        <div class="col-xs-7">
                            <ul class="list-unstyled" id="personal-info-right">
                                <!-- البيانات هتتحمل من API -->
                            </ul>
                        </div>
                    </div>
                   </div>
                </div>
            </div>
            <div class="col-md-6 col-sm-12">
               <div class="container">
                <div class="row" id="stats-container">
                    <!-- الإحصائيات هتتحمل من API -->
                </div>
               </div>
            </div>
        </div>
        <hr class="hr1">
        <div class="summery">
            <h2>Experience & Education</h2>
            <div class="row" id="experience-education">
                <!-- الخبرات والتعليم هتتحمل من API -->
            </div>
        </div> 
    </div>
</section>

<!-- باقي الكود بدون تغيير -->
<aside class=" d-none d-lg-block">
    <ul class="list_unlisted">
        <li>
            <a href="index.html" title="Home">
                <i class="fa fa-home " aria-hidden="true"></i>
            </a>
        </li>
        <li>
            <a href="about.html" title="About">
                 <i class="fa fa-user active" aria-hidden="true"></i>
            </a>
        </li>
        <li>
            <a href="portfolio.html" title="portfolio">
                <i class="fa fa-briefcase" aria-hidden="true"></i>
            </a>
        </li>
        <!-- <li>
            <a href="contact.html" title="Contact">
                <i class="fa fa-envelope-open" aria-hidden="true"></i>
             </a>
        </li> -->
    </ul>
</aside>

<div class="nav-btn d-block d-lg-none">
    <div class="line one"></div>
    <div class="line two"></div>
    <div class="line three"></div>
</div>

<section class="side">
   <div>
    <ul class="list_unlisted">
        <li >
             <a href="index.html" title="Home">
                <i class="fa fa-home " aria-hidden="true"></i>
                  Home
            </a>
         </li>
         <li class="active">
            <a href="about.html" title="About">
               <i class="fa fa-user " aria-hidden="true"></i>
            About       
            </a>
        </li>
        <li>
            <a href="portfolio.html" title="Portfolio">
               <i class="fa fa-briefcase " aria-hidden="true"></i>
                 Portfolio
           </a>
        </li>
        <!-- <li>
            <a href="contact.html" title="Contact">
               <i class="fa fa-envelope-open " aria-hidden="true"></i>
                 Contact
           </a>
        </li> -->
    </ul>
   </div>
</section>

<div class="preloader">
    <div class="black_wall"></div>
    <div class="loader"></div>
</div>

<!-- -----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------------
--------------------------------------------End About ---------------------------------------------------
----------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------ -->
    <script src="js/jquery-3.5.0.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
<script>
    $(document).ready(function() {
        const supabaseUrl = 'https://adhxwfcdbxwonsnnsjee.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFkaHh3ZmNkYnh3b25zbm5zamVlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI4MTk4MjUsImV4cCI6MjA3ODM5NTgyNX0.G1HVqBBoS0SWrBWU_oUxxb9RKCme_v4MOYTjYGI06DI';
        
        // دالة لتحويل التاريخ
        function formatDate(dateString) {
            if (!dateString) return '';
            const date = new Date(dateString);
            return date.getFullYear();
        }
        
        // جلب كل البيانات
        function loadAboutData() {
            loadPersonalInfo();
            loadStats();
            loadExperienceEducation();
        }
        
        // جلب المعلومات الشخصية
        function loadPersonalInfo() {
            $.ajax({
                url: supabaseUrl + '/rest/v1/personal_info?order=sort_order',
                method: 'GET',
                headers: {
                    'apikey': supabaseKey,
                    'Authorization': 'Bearer ' + supabaseKey
                },
                success: function(data) {
                    let leftHtml = '';
                    let rightHtml = '';
                    
                    data.forEach((item, index) => {
                        const listItem = `<li>${item.field_name} : <span>${item.field_value}</span></li>`;
                        
                        if (index < 4) {
                            leftHtml += listItem;
                        } else {
                            rightHtml += listItem;
                        }
                    });
                    
                    $('#personal-info-left').html(leftHtml);
                    $('#personal-info-right').html(rightHtml);
                }
            });
        }
        
        // جلب الإحصائيات
        function loadStats() {
            $.ajax({
                url: supabaseUrl + '/rest/v1/stats?order=sort_order',
                method: 'GET',
                headers: {
                    'apikey': supabaseKey,
                    'Authorization': 'Bearer ' + supabaseKey
                },
                success: function(data) {
                    let statsHtml = '';
                    
                    data.forEach(stat => {
                        statsHtml += `
                            <div class="col-xs-6 mar">
                                <div class="contentNum">
                                    <p class="num">${stat.stat_number}</p>
                                    <span><hr class="hr">${stat.stat_label}</span>
                                </div>
                            </div>
                        `;
                    });
                    
                    $('#stats-container').html(statsHtml);
                }
            });
        }
        
        // جلب الخبرات والتعليم
        function loadExperienceEducation() {
            $.ajax({
                url: supabaseUrl + '/rest/v1/work_experience?order=start_date',
                method: 'GET',
                headers: {
                    'apikey': supabaseKey,
                    'Authorization': 'Bearer ' + supabaseKey
                },
                success: function(experience) {
                    $.ajax({
                        url: supabaseUrl + '/rest/v1/education?order=start_date',
                        method: 'GET',
                        headers: {
                            'apikey': supabaseKey,
                            'Authorization': 'Bearer ' + supabaseKey
                        },
                        success: function(education) {
                            let experienceHtml = '';
                            let educationHtml = '';
                            
                            // الخبرات
                            experience.forEach(exp => {
                                const startYear = formatDate(exp.start_date);
                                const endYear = exp.end_date ? formatDate(exp.end_date) : 'Present';
                                experienceHtml += `
                                    <div class="col-md-6">
                                        <div class="content">
                                            <i class="fa fa-briefcase"></i>
                                            <p class="time">${startYear} - ${endYear}</p>
                                            <p class="title lead">${exp.job_title} - ${exp.company_name}</p>
                                            <span class="sum">${exp.description}</span>    
                                        </div>
                                    </div>
                                `;
                            });
                            
                            // التعليم
                            education.forEach(edu => {
                                const startYear = formatDate(edu.start_date);
                                const endYear = edu.end_date ? formatDate(edu.end_date) : 'Present';
                                educationHtml += `
                                    <div class="col-md-6">
                                        <div class="content">
                                            <i class="fa fa-graduation-cap"></i>
                                            <p class="time">${startYear} - ${endYear}</p>
                                            <p class="title lead">${edu.degree} - ${edu.institution}</p>
                                            <span class="sum">${edu.description}</span>    
                                        </div>
                                    </div>
                                `;
                            });
                            
                            $('#experience-education').html(experienceHtml + educationHtml);
                            $('.preloader').fadeOut(500);
                        }
                    });
                }
            });
        }
        
        // تشغيل جلب البيانات
        loadAboutData();
    });
</script>
    
    <script src="js/blugin.js"></script>
</body>
</html>